<!-- Statistics Section Component -->
<!-- Usage: {% include stats-section.html %} -->

{% assign stats_config = include.config | default: site.data.stats %}
{% assign show_animation = include.animate | default: true %}
{% assign layout = include.layout | default: "grid" %}
{% assign color_scheme = include.color_scheme | default: "gradient" %}

<section class="stats-section color-scheme-{{ color_scheme }} layout-{{ layout }}{% if show_animation %} animate-on-scroll{% endif %}" id="statsSection">
  <div class="stats-container">
    <!-- Section Header -->
    {% if include.title or include.subtitle %}
    <div class="stats-header">
      {% if include.title %}
      <h2 class="stats-title">{{ include.title }}</h2>
      {% endif %}
      {% if include.subtitle %}
      <p class="stats-subtitle">{{ include.subtitle }}</p>
      {% endif %}
    </div>
    {% endif %}
    
    <!-- Stats Grid -->
    <div class="stats-grid">
      <!-- Teachers Count -->
      <div class="stat-item stat-teachers" data-stat="teachers">
        <div class="stat-icon">
          <div class="icon-background">
            <i class="fas fa-chalkboard-teacher"></i>
          </div>
        </div>
        <div class="stat-content">
          <div class="stat-number" data-target="{{ site.data.teachers.size | default: 250 }}" data-suffix="+">
            0
          </div>
          <div class="stat-label">Expert Teachers</div>
          <div class="stat-description">Verified and experienced educators</div>
        </div>
        <div class="stat-trend positive">
          <i class="fas fa-arrow-up"></i>
          <span>+12% this month</span>
        </div>
      </div>
      
      <!-- Students Count -->
      <div class="stat-item stat-students" data-stat="students">
        <div class="stat-icon">
          <div class="icon-background">
            <i class="fas fa-graduation-cap"></i>
          </div>
        </div>
        <div class="stat-content">
          <div class="stat-number" data-target="2500" data-suffix="+">
            0
          </div>
          <div class="stat-label">Happy Students</div>
          <div class="stat-description">Learning and growing with us</div>
        </div>
        <div class="stat-trend positive">
          <i class="fas fa-arrow-up"></i>
          <span>+25% this month</span>
        </div>
      </div>
      
      <!-- Subjects Count -->
      <div class="stat-item stat-subjects" data-stat="subjects">
        <div class="stat-icon">
          <div class="icon-background">
            <i class="fas fa-book-open"></i>
          </div>
        </div>
        <div class="stat-content">
          <div class="stat-number" data-target="{{ site.subject_categories.size | times: 4 | default: 50 }}" data-suffix="+">
            0
          </div>
          <div class="stat-label">Subject Areas</div>
          <div class="stat-description">Comprehensive learning topics</div>
        </div>
        <div class="stat-trend positive">
          <i class="fas fa-arrow-up"></i>
          <span>+8% this month</span>
        </div>
      </div>
      
      <!-- Success Rate -->
      <div class="stat-item stat-success" data-stat="success">
        <div class="stat-icon">
          <div class="icon-background">
            <i class="fas fa-trophy"></i>
          </div>
        </div>
        <div class="stat-content">
          <div class="stat-number" data-target="95" data-suffix="%">
            0
          </div>
          <div class="stat-label">Success Rate</div>
          <div class="stat-description">Students achieving their goals</div>
        </div>
        <div class="stat-trend positive">
          <i class="fas fa-arrow-up"></i>
          <span>+3% this month</span>
        </div>
      </div>
      
      <!-- Average Rating -->
      <div class="stat-item stat-rating" data-stat="rating">
        <div class="stat-icon">
          <div class="icon-background">
            <i class="fas fa-star"></i>
          </div>
        </div>
        <div class="stat-content">
          <div class="stat-number" data-target="4.8" data-suffix="‚≠ê">
            0
          </div>
          <div class="stat-label">Average Rating</div>
          <div class="stat-description">From student reviews</div>
        </div>
        <div class="stat-trend positive">
          <i class="fas fa-arrow-up"></i>
          <span>+0.2 this month</span>
        </div>
      </div>
      
      <!-- Countries Served -->
      <div class="stat-item stat-countries" data-stat="countries">
        <div class="stat-icon">
          <div class="icon-background">
            <i class="fas fa-globe"></i>
          </div>
        </div>
        <div class="stat-content">
          <div class="stat-number" data-target="25" data-suffix="+">
            0
          </div>
          <div class="stat-label">Countries</div>
          <div class="stat-description">Global learning community</div>
        </div>
        <div class="stat-trend positive">
          <i class="fas fa-arrow-up"></i>
          <span>+5 this month</span>
        </div>
      </div>
    </div>
    
    <!-- Additional Stats Row -->
    {% if include.show_additional %}
    <div class="additional-stats">
      <div class="additional-stat">
        <span class="additional-number">98%</span>
        <span class="additional-label">Completion Rate</span>
      </div>
      <div class="additional-stat">
        <span class="additional-number">24/7</span>
        <span class="additional-label">Support Available</span>
      </div>
      <div class="additional-stat">
        <span class="additional-number">48hrs</span>
        <span class="additional-label">Avg. Response Time</span>
      </div>
      <div class="additional-stat">
        <span class="additional-number">100K+</span>
        <span class="additional-label">Hours Taught</span>
      </div>
    </div>
    {% endif %}
    
    <!-- Call to Action -->
    {% if include.show_cta %}
    <div class="stats-cta">
      <h3>Ready to Join Our Community?</h3>
      <p>Start your learning journey with our expert teachers today</p>
      <div class="cta-buttons">
        <a href="/teachers/" class="btn btn-primary">
          <i class="fas fa-search"></i>
          Find Teachers
        </a>
        <a href="/signup/" class="btn btn-secondary">
          <i class="fas fa-user-plus"></i>
          Sign Up Free
        </a>
      </div>
    </div>
    {% endif %}
  </div>
  
  <!-- Background Elements -->
  <div class="stats-background">
    <div class="bg-shape shape-1"></div>
    <div class="bg-shape shape-2"></div>
    <div class="bg-shape shape-3"></div>
    <div class="floating-elements">
      <div class="floating-element" style="--delay: 0s; --duration: 8s;">üìö</div>
      <div class="floating-element" style="--delay: 2s; --duration: 10s;">üéì</div>
      <div class="floating-element" style="--delay: 4s; --duration: 12s;">‚≠ê</div>
      <div class="floating-element" style="--delay: 6s; --duration: 9s;">üèÜ</div>
    </div>
  </div>
</section>

<style>
/* Stats Section Styles - See main.css for complete styling */
.stats-section {
  position: relative;
  padding: var(--space-20) 0;
  overflow: hidden;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
}

.stats-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 var(--space-4);
  position: relative;
  z-index: 2;
}

.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: var(--space-8);
}

.stat-item {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: var(--radius-2xl);
  padding: var(--space-8);
  text-align: center;
  transition: all var(--transition-slow);
}

.stat-item:hover {
  transform: translateY(-8px);
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
}

.stat-number {
  font-size: clamp(2.5rem, 5vw, 4rem);
  font-weight: var(--font-weight-black);
  background: linear-gradient(135deg, #fbbf24, #f59e0b);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  display: block;
  margin-bottom: var(--space-2);
}

.stat-label {
  font-size: 1.125rem;
  font-weight: var(--font-weight-bold);
  margin-bottom: var(--space-1);
}

.stat-description {
  font-size: 0.875rem;
  opacity: 0.8;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: var(--space-6);
  }
}
</style>

<script>
// Stats Animation and Functionality
document.addEventListener('DOMContentLoaded', function() {
    const statsSection = document.getElementById('statsSection');
    const statNumbers = document.querySelectorAll('.stat-number');
    let animationTriggered = false;
    
    // Intersection Observer for scroll animations
    const observerOptions = {
        threshold: 0.3,
        rootMargin: '0px 0px -50px 0px'
    };
    
    const observer = new IntersectionObserver(function(entries) {
        entries.forEach(entry => {
            if (entry.isIntersecting && !animationTriggered) {
                entry.target.classList.add('in-view');
                
                // Animate stat items with staggered delay
                const statItems = entry.target.querySelectorAll('.stat-item');
                statItems.forEach((item, index) => {
                    setTimeout(() => {
                        item.classList.add('animate-in');
                    }, index * 100);
                });
                
                // Start number animations
                setTimeout(() => {
                    animateNumbers();
                }, 500);
                animationTriggered = true;
            }
        });
    }, observerOptions);
    
    if (statsSection) {
        observer.observe(statsSection);
    }
    
    // Number counting animation
    function animateNumbers() {
        statNumbers.forEach(numberElement => {
            const target = parseFloat(numberElement.dataset.target);
            const suffix = numberElement.dataset.suffix || '';
            const duration = 2000;
            const increment = target / (duration / 16);
            let current = 0;
            
            const updateNumber = () => {
                current += increment;
                
                if (current >= target) {
                    current = target;
                    numberElement.textContent = formatNumber(current) + suffix;
                    return;
                }
                
                numberElement.textContent = formatNumber(current) + suffix;
                requestAnimationFrame(updateNumber);
            };
            
            requestAnimationFrame(updateNumber);
        });
    }
    
    // Number formatting
    function formatNumber(num) {
        if (num >= 1000000) {
            return (num / 1000000).toFixed(1) + 'M';
        } else if (num >= 1000) {
            return (num / 1000).toFixed(1) + 'K';
        } else if (num % 1 !== 0) {
            return num.toFixed(1);
        } else {
            return Math.floor(num).toString();
        }
    }
});
</script>